<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Adsl derivations Derived = 1 level | A Minimal Book Example</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Adsl derivations Derived = 1 level | A Minimal Book Example" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Adsl derivations Derived = 1 level | A Minimal Book Example" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Yihui Xie" />


<meta name="date" content="2020-12-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="subject-level-analysis-adsl.html"/>
<link rel="next" href="methods.html"/>
<script src="libs/header-attrs-2.4.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="study-cdisc-pilot01-guide.html"><a href="study-cdisc-pilot01-guide.html"><i class="fa fa-check"></i><b>3</b> <strong>Study CDISC Pilot01 Guide</strong></a></li>
<li class="chapter" data-level="4" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html"><i class="fa fa-check"></i><b>4</b> <strong>Overview of Analysis Datasets</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html#adae-adverse-events-analysis-data"><i class="fa fa-check"></i><b>4.1</b> ADAE – Adverse Events Analysis Data</a></li>
<li class="chapter" data-level="4.2" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html#adlbhy-laboratory-results-hys-rule-analysis-data"><i class="fa fa-check"></i><b>4.2</b> ADLBHY – Laboratory Results Hy’s Rule Analysis Data</a></li>
<li class="chapter" data-level="4.3" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html#adqsadas-adas-cog-data"><i class="fa fa-check"></i><b>4.3</b> ADQSADAS – ADAS-COG Data</a></li>
<li class="chapter" data-level="4.4" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html#adqscibc-cibc-data"><i class="fa fa-check"></i><b>4.4</b> ADQSCIBC – CIBC Data</a></li>
<li class="chapter" data-level="4.5" data-path="overview-of-analysis-datasets.html"><a href="overview-of-analysis-datasets.html#adqsnpix-npi-x-item-analysis-data"><i class="fa fa-check"></i><b>4.5</b> ADQSNPIX – NPI-X Item Analysis Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="adam-datasets-for-study-cdisc-pilot-01.html"><a href="adam-datasets-for-study-cdisc-pilot-01.html"><i class="fa fa-check"></i><b>5</b> ADaM Datasets for Study CDISC PILOT 01</a></li>
<li class="chapter" data-level="6" data-path="subject-level-analysis-adsl.html"><a href="subject-level-analysis-adsl.html"><i class="fa fa-check"></i><b>6</b> Subject-Level Analysis (ADSL)</a></li>
<li class="chapter" data-level="7" data-path="Variable.html"><a href="Variable.html"><i class="fa fa-check"></i><b>7</b> Adsl derivations Derived = 1 level</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Variable.html"><a href="Variable.html#overview"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="Variable.html"><a href="Variable.html#your-turn"><i class="fa fa-check"></i><b>7.2</b> Your Turn</a></li>
<li class="chapter" data-level="7.3" data-path="Variable.html"><a href="Variable.html#adsl-derivation-code-part-1"><i class="fa fa-check"></i><b>7.3</b> Adsl Derivation Code part-1</a></li>
<li class="chapter" data-level="7.4" data-path="Variable.html"><a href="Variable.html#date-of-first-exposure-to-treatment"><i class="fa fa-check"></i><b>7.4</b> <strong>Date of First Exposure to Treatment</strong></a></li>
<li class="chapter" data-level="7.5" data-path="Variable.html"><a href="Variable.html#date-of-last-exposure-to-treatment-trtedt"><i class="fa fa-check"></i><b>7.5</b> Date of Last Exposure to Treatment (TRTEDT)</a></li>
<li class="chapter" data-level="7.6" data-path="Variable.html"><a href="Variable.html#getting-the-first-and-last-observations"><i class="fa fa-check"></i><b>7.6</b> <strong>Getting the First and Last observations</strong></a></li>
<li class="chapter" data-level="7.7" data-path="Variable.html"><a href="Variable.html#baseline-variables"><i class="fa fa-check"></i><b>7.7</b> Baseline Variables</a></li>
<li class="chapter" data-level="7.8" data-path="Variable.html"><a href="Variable.html#comparing-the-values-generated-against-the-production-data-set"><i class="fa fa-check"></i><b>7.8</b> Comparing the values generated against the production data set</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>8</b> Methods</a></li>
<li class="chapter" data-level="9" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>9</b> Applications</a>
<ul>
<li class="chapter" data-level="9.1" data-path="applications.html"><a href="applications.html#example-one"><i class="fa fa-check"></i><b>9.1</b> Example one</a></li>
<li class="chapter" data-level="9.2" data-path="applications.html"><a href="applications.html#example-two"><i class="fa fa-check"></i><b>9.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>10</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Variable" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Adsl derivations Derived = 1 level</h1>
<p>List of Variables Derived = 1</p>
<table>
<colgroup>
<col width="4%" />
<col width="10%" />
<col width="25%" />
<col width="59%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Label</strong></th>
<th><strong>Source/Derivation/Comments</strong></th>
<th>R Dplyr Snippet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>STUDYID</td>
<td>Study Identifier</td>
<td>DM.STUDYID</td>
<td><code>select ( dm , studyid)</code></td>
</tr>
<tr class="even">
<td>USUBJID</td>
<td>Unique Subject Identifier</td>
<td>DM.USUBJID</td>
<td><code>select ( dm , usubjid)</code></td>
</tr>
<tr class="odd">
<td>SUBJID</td>
<td>Subject Identifier for the Study</td>
<td>DM.SUBJID</td>
<td><code>select ( dm , subjid)</code></td>
</tr>
<tr class="even">
<td>SITEID</td>
<td>Study Site Identifier</td>
<td>DM.SITEID</td>
<td><code>select ( dm , siteid)</code></td>
</tr>
<tr class="odd">
<td>ARM</td>
<td>Description of Planned Arm</td>
<td>DM.ARM</td>
<td><code>select ( dm , arm)</code></td>
</tr>
<tr class="even">
<td>TRT01P</td>
<td>Planned Treatment for Period 01</td>
<td>DM.ARM</td>
<td><code>select ( dm , arm)</code></td>
</tr>
<tr class="odd">
<td>TRT01A</td>
<td>Actual Treatment for Period 01</td>
<td>TRT01A=TRT01P, i.e., no difference between actual and randomized treatment in this study.</td>
<td><code>mutate ( dm , TRT01A= ARM)</code></td>
</tr>
<tr class="even">
<td>TRT01AN</td>
<td>Actual Treatment for Period 01 (N)</td>
<td>Numeric code for TRT01A which corresponds to the randomized dose</td>
<td><code>mutate( trt01pn  =ifelse( (arm %in% "Placebo" ) , 0 , ifelse( (arm %in% Xanomeline Low Dose" ) , 54, ifelse( (arm %in% "Xanomeline High Dose" ) , 81 , NA)))</code></td>
</tr>
<tr class="odd">
<td>AGE</td>
<td>Age</td>
<td>DM.AGE</td>
<td><code>select ( dm , age)</code></td>
</tr>
<tr class="even">
<td>RACE</td>
<td>Race</td>
<td>DM.RACE</td>
<td><code>select ( dm , race)</code></td>
</tr>
<tr class="odd">
<td>RACEN</td>
<td>Race (N)</td>
<td>Numeric code for RACE</td>
<td><code>case_when( race %in% "WHITE" ~ 1 , race %in% "BLACK OR AFRICAN AMERICAN" ~ 2 ,                           race %in% "AMERICAN INDIAN OR ALASKA NATIVE" ~ 6 ,                              race %in% "ASIAN" ~ 7 )</code></td>
</tr>
<tr class="even">
<td>SEX</td>
<td>Sex</td>
<td>DM.SEX</td>
<td><code>select(dm,sex)</code></td>
</tr>
<tr class="odd">
<td>ETHNIC</td>
<td>Ethnicity</td>
<td>DM.ETHNIC</td>
<td><code>select(dm,ethnic)</code></td>
</tr>
<tr class="even">
<td>DTHFL</td>
<td>Subject Died?</td>
<td>DM.DTHFL</td>
<td><code>select(dm,dthfl)</code></td>
</tr>
<tr class="odd">
<td>RFSTDTC</td>
<td>Subject Reference Start Date/Time</td>
<td>DM.RFSTDTC</td>
<td><code>select(dm,rfstdtc)</code></td>
</tr>
<tr class="even">
<td>RFENDTC</td>
<td>Subject Reference End Date/Time</td>
<td>DM.RFENDTC</td>
<td><code>select(dm,rfendtc)</code></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="overview" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Overview</h2>
<div id="important-functions" class="section level4 history" number="7.1.0.1">
<h4><span class="header-section-number">7.1.0.1</span> Important Functions</h4>
<p>dplyr is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges:</p>
<ul>
<li><p><a href="https://dplyr.tidyverse.org/reference/mutate.html"><code>mutate()</code></a> adds new variables that are functions of existing variables</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/select.html"><code>select()</code></a> picks variables based on their names.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a> picks cases based on their values.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/summarise.html"><code>summarise()</code></a> reduces multiple values down to a single summary.</p></li>
<li><p><a href="https://dplyr.tidyverse.org/reference/arrange.html"><code>arrange()</code></a> changes the ordering of the rows.</p></li>
</ul>
</div>
</div>
<div id="your-turn" class="section level2 exercise" number="7.2">
<h2><span class="header-section-number">7.2</span> Your Turn</h2>
<p>**List out various Character and Numeric Dplyr functions**</p>
<p><a href="https://dplyr.tidyverse.org/">[Learn to use R Dplyr Package]</a></p>
<ol style="list-style-type: decimal">
<li><p>List out all the functions used</p>
<p><a href="https://dplyr.tidyverse.org/reference/filter_all.html?q=filter" title="Filter within a selection of variables">Filter</a></p>
<p><a href="https://dplyr.tidyverse.org/reference/select.html" title="Used to select the variables needed">Select</a></p>
<p><a href="https://dplyr.tidyverse.org/reference/case_when.html?q=case%20_%20when" title="R equivalent of the SQL CASE WHEN statement. If no cases match, NA is returned">case_when</a></p>
<p><a href="https://dplyr.tidyverse.org/reference/if_else.html?q=if%20_%20else" title="Compared to the base ifelse(), this function is more strict. It checks that true and false are the same type">if_else()</a></p>
<p>as.character</p>
<p>mutate</p>
<p>inner_join</p>
<p>as.Date(as.character(svstdtc) )</p>
<p>as.Date</p>
<p><a href="https://www.rdocumentation.org/packages/zoo/versions/1.5-7/topics/as.Date.numeric" title="Date Conversion Functions From Numeric, Integer And Ts Objects Functions to convert numeric and related classes to objects of class &quot;Date&quot; representing calendar dates.">as.Date.numeric</a></p>
<h2 id="lets-start-programming">Let’s start programming</h2>
<ol style="list-style-type: decimal">
<li>Initialize all the Library’s needed for the project</li>
</ol></li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="Variable.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#intilizing the Dplyr library</span></span>
<span id="cb9-2"><a href="Variable.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.3     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="Variable.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="Variable.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clinicalfd)  <span class="co"># To read in fake clinical data</span></span>
<span id="cb16-2"><a href="Variable.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arsenal)     <span class="co"># for comparing datasets</span></span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;arsenal&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:lubridate&#39;:
## 
##     is.Date</code></pre>
<p><u><em>Remove all the objects in the Global Environment ( Kind of clearing SAS work directory ) , This is kind of needed as you might get an Error saying the variable not found .</em></u></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="Variable.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">remove</span> ( <span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Bring in the datasets needed</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="Variable.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dm &lt;- clinicalfd::dm </span></span>
<span id="cb20-2"><a href="Variable.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># names(clinicalfd::dm )</span></span>
<span id="cb20-3"><a href="Variable.html#cb20-3" aria-hidden="true" tabindex="-1"></a>dm <span class="ot">&lt;-</span> clinicalfd<span class="sc">::</span>dm</span>
<span id="cb20-4"><a href="Variable.html#cb20-4" aria-hidden="true" tabindex="-1"></a>dm  <span class="ot">&lt;-</span> dplyr <span class="sc">::</span> <span class="fu">filter</span>(dm ,arm <span class="sc">!=</span><span class="st">&quot;Screen Failure&quot;</span> )</span>
<span id="cb20-5"><a href="Variable.html#cb20-5" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span> ( dm , usubjid , siteid,arm) <span class="co"># Select </span></span>
<span id="cb20-6"><a href="Variable.html#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="Variable.html#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#dm_01 &lt;- mutate (dm_01 , usubjid = as.character(usubjid) )</span></span>
<span id="cb20-8"><a href="Variable.html#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="Variable.html#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="Variable.html#cb20-10" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>( adsl_deri01 , <span class="at">TRT01P =</span> arm) </span>
<span id="cb20-11"><a href="Variable.html#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Use of Mutate function to create new variable#</span></span></code></pre></div>
</div>
<div id="adsl-derivation-code-part-1" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Adsl Derivation Code part-1</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="Variable.html#cb21-1" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> dm  <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="Variable.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span> (actarmcd <span class="sc">!=</span><span class="st">&quot;Scrnfail&quot;</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="Variable.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sitegr1 =</span> siteid , <span class="at">trt01p =</span> arm , <span class="at">trt01a =</span> arm , </span>
<span id="cb21-4"><a href="Variable.html#cb21-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid),</span>
<span id="cb21-5"><a href="Variable.html#cb21-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">trt01pn  =</span> <span class="fu">ifelse</span>( (arm <span class="sc">%in%</span> <span class="st">&quot;Placebo&quot;</span> ) , <span class="dv">0</span> ,</span>
<span id="cb21-6"><a href="Variable.html#cb21-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>( (arm <span class="sc">%in%</span> <span class="st">&quot;Xanomeline Low Dose&quot;</span> ) , <span class="dv">54</span>,</span>
<span id="cb21-7"><a href="Variable.html#cb21-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>( (arm <span class="sc">%in%</span> <span class="st">&quot;Xanomeline High Dose&quot;</span> ) , <span class="dv">81</span> , <span class="cn">NA</span>))) ,</span>
<span id="cb21-8"><a href="Variable.html#cb21-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">trt01an =</span> trt01pn ,</span>
<span id="cb21-9"><a href="Variable.html#cb21-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">ittfl   =</span> <span class="fu">ifelse</span> (trt01pn <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">54</span>,<span class="dv">81</span>) , <span class="st">&quot;Y&quot;</span> , <span class="st">&quot;N&quot;</span> ),</span>
<span id="cb21-10"><a href="Variable.html#cb21-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">agegr1  =</span> <span class="fu">case_when</span>( age <span class="sc">&lt;</span> <span class="dv">65</span>  <span class="sc">~</span> <span class="st">&quot;&lt;65&quot;</span> , </span>
<span id="cb21-11"><a href="Variable.html#cb21-11" aria-hidden="true" tabindex="-1"></a>                              (<span class="dv">65</span> <span class="sc">&lt;=</span> age <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">80</span> ) <span class="sc">~</span> <span class="st">&quot;65-80&quot;</span>  , </span>
<span id="cb21-12"><a href="Variable.html#cb21-12" aria-hidden="true" tabindex="-1"></a>                               (age <span class="sc">&gt;</span> <span class="dv">80</span> ) <span class="sc">~</span> <span class="st">&quot;&gt;80&quot;</span>  ),</span>
<span id="cb21-13"><a href="Variable.html#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="Variable.html#cb21-14" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb21-15"><a href="Variable.html#cb21-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">agegr1n  =</span> <span class="fu">case_when</span>( age <span class="sc">&lt;</span> <span class="dv">65</span>  <span class="sc">~</span> <span class="dv">1</span>  , </span>
<span id="cb21-16"><a href="Variable.html#cb21-16" aria-hidden="true" tabindex="-1"></a>                                (<span class="dv">65</span> <span class="sc">&lt;=</span> age <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">80</span> ) <span class="sc">~</span> <span class="dv">2</span>  , </span>
<span id="cb21-17"><a href="Variable.html#cb21-17" aria-hidden="true" tabindex="-1"></a>                                (age <span class="sc">&gt;</span> <span class="dv">80</span> ) <span class="sc">~</span> <span class="dv">3</span>  ),</span>
<span id="cb21-18"><a href="Variable.html#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="Variable.html#cb21-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">race  =</span> <span class="fu">case_when</span>( race <span class="sc">%in%</span> <span class="st">&quot;WHITE&quot;</span> <span class="sc">~</span> <span class="st">&quot;WHITE&quot;</span> , </span>
<span id="cb21-20"><a href="Variable.html#cb21-20" aria-hidden="true" tabindex="-1"></a>                              race <span class="sc">%in%</span> <span class="st">&quot;BLACK OR AFRICAN AMERICAN&quot;</span> <span class="sc">~</span>                                <span class="st">&quot;BLACK OR AFRICAN AMERICAN&quot;</span> ,</span>
<span id="cb21-21"><a href="Variable.html#cb21-21" aria-hidden="true" tabindex="-1"></a>                              </span>
<span id="cb21-22"><a href="Variable.html#cb21-22" aria-hidden="true" tabindex="-1"></a>race <span class="sc">%in%</span> <span class="st">&quot;AMERICAN INDIAN OR ALASKA NATIVE&quot;</span> <span class="sc">~</span> <span class="st">&quot;AMERICAN INDIAN OR ALASKA NATIVE&quot;</span> ,</span>
<span id="cb21-23"><a href="Variable.html#cb21-23" aria-hidden="true" tabindex="-1"></a>            race <span class="sc">%in%</span> <span class="st">&quot;ASIAN&quot;</span> <span class="sc">~</span> <span class="st">&quot;ASIAN&quot;</span> ) , </span>
<span id="cb21-24"><a href="Variable.html#cb21-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">racen  =</span> <span class="fu">case_when</span>( race <span class="sc">%in%</span> <span class="st">&quot;WHITE&quot;</span> <span class="sc">~</span> <span class="dv">1</span> , </span>
<span id="cb21-25"><a href="Variable.html#cb21-25" aria-hidden="true" tabindex="-1"></a>            race <span class="sc">%in%</span> <span class="st">&quot;BLACK OR AFRICAN AMERICAN&quot;</span> <span class="sc">~</span> <span class="dv">2</span> ,</span>
<span id="cb21-26"><a href="Variable.html#cb21-26" aria-hidden="true" tabindex="-1"></a>            race <span class="sc">%in%</span> <span class="st">&quot;AMERICAN INDIAN OR ALASKA NATIVE&quot;</span> <span class="sc">~</span> <span class="dv">6</span> ,</span>
<span id="cb21-27"><a href="Variable.html#cb21-27" aria-hidden="true" tabindex="-1"></a>            race <span class="sc">%in%</span> <span class="st">&quot;ASIAN&quot;</span> <span class="sc">~</span> <span class="dv">7</span> ),</span>
<span id="cb21-28"><a href="Variable.html#cb21-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">sex  =</span>  <span class="fu">case_when</span>(sex <span class="sc">%in%</span> <span class="st">&quot;F&quot;</span> <span class="sc">~</span> <span class="st">&quot;Female&quot;</span>  , </span>
<span id="cb21-29"><a href="Variable.html#cb21-29" aria-hidden="true" tabindex="-1"></a>                             sex <span class="sc">%in%</span> <span class="st">&quot;M&quot;</span> <span class="sc">~</span> <span class="st">&quot;Male&quot;</span>    , </span>
<span id="cb21-30"><a href="Variable.html#cb21-30" aria-hidden="true" tabindex="-1"></a>                             sex <span class="sc">%in%</span> <span class="st">&quot;U&quot;</span> <span class="sc">~</span>  <span class="st">&quot;Unknown&quot;</span> ) , </span>
<span id="cb21-31"><a href="Variable.html#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="at">ethnic=</span><span class="fu">case_when</span>(ethnic <span class="sc">%in%</span> <span class="st">&quot;NOT HISPANIC OR LATINO&quot;</span> <span class="sc">~</span> <span class="st">&quot;NOT HISPANIC OR LATINO&quot;</span>, </span>
<span id="cb21-32"><a href="Variable.html#cb21-32" aria-hidden="true" tabindex="-1"></a>                ethnic <span class="sc">%in%</span> <span class="st">&quot;HISPANIC OR LATINO&quot;</span> <span class="sc">~</span> <span class="st">&quot;HISPANIC OR LATINO&quot;</span>    , </span>
<span id="cb21-33"><a href="Variable.html#cb21-33" aria-hidden="true" tabindex="-1"></a>                ethnic <span class="sc">%in%</span> <span class="st">&quot;U&quot;</span> <span class="sc">~</span>  <span class="st">&quot;Unknown&quot;</span> )  </span>
<span id="cb21-34"><a href="Variable.html#cb21-34" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="date-of-first-exposure-to-treatment" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> <strong>Date of First Exposure to Treatment</strong></h2>
</div>
<p><strong>Date of First Exposure to Treatment (TRTSDT) derivation</strong></p>
<p><strong>SV.SVSTDTC when SV.VISITNUM=3, converted to SAS date</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="Variable.html#cb22-1" aria-hidden="true" tabindex="-1"></a>sv_visit <span class="ot">&lt;-</span> clinicalfd<span class="sc">::</span>sv   </span>
<span id="cb22-2"><a href="Variable.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="Variable.html#cb22-3" aria-hidden="true" tabindex="-1"></a>sv_visit3 <span class="ot">&lt;-</span> sv_visit <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="Variable.html#cb22-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">filter</span>(visitnum <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="Variable.html#cb22-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>(<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) , </span>
<span id="cb22-6"><a href="Variable.html#cb22-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trtsdt =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(svstdtc))  </span>
<span id="cb22-7"><a href="Variable.html#cb22-7" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-8"><a href="Variable.html#cb22-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span> (usubjid , svstdtc , trtsdt )</span>
<span id="cb22-9"><a href="Variable.html#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="Variable.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># For derive DURDIS (duration of Disease (months))</span></span>
<span id="cb22-11"><a href="Variable.html#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="Variable.html#cb22-12" aria-hidden="true" tabindex="-1"></a>sv_visit1 <span class="ot">&lt;-</span> sv_visit <span class="sc">%&gt;%</span> </span>
<span id="cb22-13"><a href="Variable.html#cb22-13" aria-hidden="true" tabindex="-1"></a>             <span class="fu">filter</span>(visitnum <span class="sc">==</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-14"><a href="Variable.html#cb22-14" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>(<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) , </span>
<span id="cb22-15"><a href="Variable.html#cb22-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">visit1dt =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(svstdtc))  </span>
<span id="cb22-16"><a href="Variable.html#cb22-16" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">%&gt;%</span> </span>
<span id="cb22-17"><a href="Variable.html#cb22-17" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span> (usubjid ,  visit1dt )</span>
<span id="cb22-18"><a href="Variable.html#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="Variable.html#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="Variable.html#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="co"># nature of usubjid is character and svstdtc is &lt;s3.labelled&gt; </span></span>
<span id="cb22-21"><a href="Variable.html#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="Variable.html#cb22-22" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(adsl_deri01, sv_visit3 , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)</span>
<span id="cb22-23"><a href="Variable.html#cb22-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-24"><a href="Variable.html#cb22-24" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(adsl_deri01, sv_visit1 , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)</span></code></pre></div>
<div id="date-of-last-exposure-to-treatment-trtedt" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Date of Last Exposure to Treatment (TRTEDT)</h2>
<p>The date of final dose (from the CRF) is EX.EXENDTC on the subject’s last EX record. If the date of final dose is missing for the subject and the subject discontinued after visit 3, use the date of discontinuation as the date of last dose.</p>
<p>Steps to arrive at logic</p>
<ol style="list-style-type: decimal">
<li>Check for the subjects whose final dose date is missing</li>
<li><strong><code>Check if these subjects discontinued after visit 3 (Check  if they have any records after the Visit 3 , this needs checked )</code></strong></li>
<li>If they have not discontinued then use the SV date as date of last dose</li>
<li>To find last.date use <strong>slice_tail , slice_max within by group</strong> or use <strong>Dplyr::first or last functions</strong> , compare it original dataset</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="Variable.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Final dates check </span></span>
<span id="cb23-2"><a href="Variable.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="Variable.html#cb23-3" aria-hidden="true" tabindex="-1"></a>exendtc <span class="ot">&lt;-</span> ex <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="Variable.html#cb23-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) ,  </span>
<span id="cb23-5"><a href="Variable.html#cb23-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">exendtc_orig =</span> exendtc, </span>
<span id="cb23-6"><a href="Variable.html#cb23-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">exendtc =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(exendtc)) ) <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="Variable.html#cb23-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">select</span>( usubjid ,visit , visitnum,  exendtc , exendtc_orig )</span>
<span id="cb23-8"><a href="Variable.html#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="Variable.html#cb23-9" aria-hidden="true" tabindex="-1"></a>ds_disp <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb23-10"><a href="Variable.html#cb23-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">filter</span> (   dscat <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="Variable.html#cb23-11" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid))   <span class="sc">%&gt;%</span> </span>
<span id="cb23-12"><a href="Variable.html#cb23-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">select</span> ( usubjid , dsstdtc)</span>
<span id="cb23-13"><a href="Variable.html#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="Variable.html#cb23-14" aria-hidden="true" tabindex="-1"></a>exendtc <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(exendtc , ds_disp  , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)</span></code></pre></div>
<p>NOTE : Handling the Missing is different from SAS approach “disconfl_com ==”NA" won’t work and = would give an error too "</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="Variable.html#cb24-1" aria-hidden="true" tabindex="-1"></a>ds_orig  <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="Variable.html#cb24-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span> (<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid )) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="Variable.html#cb24-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span> (  usubjid , dsdecod )</span>
<span id="cb24-4"><a href="Variable.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="Variable.html#cb24-5" aria-hidden="true" tabindex="-1"></a>ds_con01 <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="Variable.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span> (dsdecod <span class="sc">==</span> <span class="st">&quot;COMPLETED&quot;</span> <span class="sc">&amp;</span> dsdecod <span class="sc">!=</span> <span class="st">&quot;SCREEN FAILURE&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="Variable.html#cb24-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) , </span>
<span id="cb24-8"><a href="Variable.html#cb24-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">disconfl_com =</span> <span class="st">&quot;Y&quot;</span>)   <span class="sc">%&gt;%</span> </span>
<span id="cb24-9"><a href="Variable.html#cb24-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">distinct</span> (usubjid, disconfl_com  ) </span>
<span id="cb24-10"><a href="Variable.html#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="Variable.html#cb24-11" aria-hidden="true" tabindex="-1"></a>ds_con02 <span class="ot">&lt;-</span> ds <span class="sc">%&gt;%</span> </span>
<span id="cb24-12"><a href="Variable.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span> (dsdecod <span class="sc">!=</span> <span class="st">&quot;COMPLETED&quot;</span> <span class="sc">&amp;</span> dsdecod <span class="sc">!=</span> <span class="st">&quot;SCREEN FAILURE&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-13"><a href="Variable.html#cb24-13" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) , </span>
<span id="cb24-14"><a href="Variable.html#cb24-14" aria-hidden="true" tabindex="-1"></a>                     <span class="at">disconfl_not_com =</span> <span class="st">&quot;Y&quot;</span> , </span>
<span id="cb24-15"><a href="Variable.html#cb24-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">dsdecod_02 =</span> dsdecod )   <span class="sc">%&gt;%</span> </span>
<span id="cb24-16"><a href="Variable.html#cb24-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">distinct</span> (usubjid , <span class="at">.keep_all  =</span> <span class="cn">TRUE</span>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-17"><a href="Variable.html#cb24-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span> (usubjid, disconfl_not_com , dsdecod_02 )</span>
<span id="cb24-18"><a href="Variable.html#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="Variable.html#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="Variable.html#cb24-20" aria-hidden="true" tabindex="-1"></a>ds_con03   <span class="ot">&lt;-</span> <span class="fu">right_join</span> ( ds_con01 , ds_con02  , <span class="st">&quot;usubjid&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-21"><a href="Variable.html#cb24-21" aria-hidden="true" tabindex="-1"></a>              <span class="fu">arrange</span>(usubjid)</span>
<span id="cb24-22"><a href="Variable.html#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="Variable.html#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="Variable.html#cb24-24" aria-hidden="true" tabindex="-1"></a>ds_con04   <span class="ot">&lt;-</span> ds_con03 <span class="sc">%&gt;%</span>  </span>
<span id="cb24-25"><a href="Variable.html#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(</span>
<span id="cb24-26"><a href="Variable.html#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="at">disconfl =</span> <span class="fu">case_when</span>( (disconfl_com <span class="sc">==</span><span class="st">&quot;Y&quot;</span> <span class="sc">&amp;</span> disconfl_not_com <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>) <span class="sc">~</span> <span class="st">&quot; &quot;</span> ,</span>
<span id="cb24-27"><a href="Variable.html#cb24-27" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb24-28"><a href="Variable.html#cb24-28" aria-hidden="true" tabindex="-1"></a>                      (disconfl_com <span class="sc">%in%</span> <span class="cn">NA</span> <span class="sc">&amp;</span> disconfl_not_com <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Y&quot;</span>) , </span>
<span id="cb24-29"><a href="Variable.html#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="Variable.html#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="at">dcreascd =</span> <span class="fu">ifelse</span>( disconfl <span class="sc">==</span> <span class="st">&quot; &quot;</span> ,  <span class="st">&quot;Completed&quot;</span> , </span>
<span id="cb24-31"><a href="Variable.html#cb24-31" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>     ( disconfl <span class="sc">==</span> <span class="st">&quot;Y&quot;</span> , <span class="fu">as.character</span>(dsdecod_02) , <span class="cn">NA</span>) </span>
<span id="cb24-32"><a href="Variable.html#cb24-32" aria-hidden="true" tabindex="-1"></a>                 ) , </span>
<span id="cb24-33"><a href="Variable.html#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="Variable.html#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="at">dsraefl =</span> <span class="fu">ifelse</span> (disconfl <span class="sc">==</span> <span class="st">&quot;Y&quot;</span> <span class="sc">&amp;</span> dsdecod_02 <span class="sc">==</span><span class="st">&quot;ADVERSE EVENT&quot;</span> , <span class="st">&quot;Y&quot;</span> , <span class="st">&quot; &quot;</span> ) </span>
<span id="cb24-35"><a href="Variable.html#cb24-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-36"><a href="Variable.html#cb24-36" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-37"><a href="Variable.html#cb24-37" aria-hidden="true" tabindex="-1"></a>       <span class="fu">distinct</span>(usubjid , <span class="at">.keep_all =</span>  <span class="cn">TRUE</span>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb24-38"><a href="Variable.html#cb24-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span> (usubjid , disconfl , dcreascd , dsraefl )</span>
<span id="cb24-39"><a href="Variable.html#cb24-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-40"><a href="Variable.html#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="Variable.html#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co">#merge back </span></span>
<span id="cb24-42"><a href="Variable.html#cb24-42" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(adsl_deri01, ds_con04 , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>) </span>
<span id="cb24-43"><a href="Variable.html#cb24-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-44"><a href="Variable.html#cb24-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-45"><a href="Variable.html#cb24-45" aria-hidden="true" tabindex="-1"></a>adsl_chk <span class="ot">&lt;-</span> <span class="fu">select</span> (adsl , usubjid, disconfl , dcreascd , dsraefl )</span></code></pre></div>
<p><strong><code>NOTE: Using the as.Date(as.Character ()) is creating numerical dates and date formats are not being , need to learn more about the as.Date .using the</code></strong></p>
<p><strong><code>as.Date( as.character () ) is creating numerical dates and date formats are not Below Logic is how you conditionally create a new column trtedt based DSSTDTC and exendtc_orig</code></strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="Variable.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subjects whose does dates are missing </span></span>
<span id="cb25-2"><a href="Variable.html#cb25-2" aria-hidden="true" tabindex="-1"></a>exendtc_1 <span class="ot">&lt;-</span> exendtc <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="Variable.html#cb25-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span> ( <span class="at">flag =</span> <span class="fu">ifelse</span> (exendtc   <span class="sc">%in%</span> <span class="cn">NA</span>  ,  <span class="st">&quot;N&quot;</span> ,<span class="st">&quot;Y&quot;</span>   ) ,</span>
<span id="cb25-4"><a href="Variable.html#cb25-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">trtedt =</span>   <span class="fu">ifelse</span>(flag <span class="sc">==</span> <span class="st">&quot;N&quot;</span>, <span class="fu">as.character</span>(dsstdtc), </span>
<span id="cb25-5"><a href="Variable.html#cb25-5" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">ifelse</span> (flag <span class="sc">==</span><span class="st">&quot;Y&quot;</span> ,<span class="fu">as.character</span>(exendtc_orig)  , <span class="cn">NA</span>  ))  ) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="Variable.html#cb25-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">filter</span> (visitnum <span class="sc">&gt;=</span> <span class="dv">3</span> )</span></code></pre></div>
</div>
<div id="getting-the-first-and-last-observations" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> <strong>Getting the First and Last observations</strong></h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="Variable.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One of the ways to get the First and Last group by values </span></span>
<span id="cb26-2"><a href="Variable.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure you use the right variables used group_by </span></span>
<span id="cb26-3"><a href="Variable.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="Variable.html#cb26-4" aria-hidden="true" tabindex="-1"></a>exendtc_2  <span class="ot">&lt;-</span> exendtc_1 <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="Variable.html#cb26-5" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span> (usubjid) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="Variable.html#cb26-6" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span> <span class="fu">mutate</span>(</span>
<span id="cb26-7"><a href="Variable.html#cb26-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">first =</span> dplyr<span class="sc">::</span><span class="fu">first</span>(trtedt) , </span>
<span id="cb26-8"><a href="Variable.html#cb26-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">last  =</span> dplyr<span class="sc">::</span><span class="fu">last</span> (trtedt)</span>
<span id="cb26-9"><a href="Variable.html#cb26-9" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb26-10"><a href="Variable.html#cb26-10" aria-hidden="true" tabindex="-1"></a>          <span class="fu">summarise</span>(<span class="at">trtedt =</span> <span class="fu">last</span>(trtedt) )</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="Variable.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#exendtc &lt;- select(exendtc,usubjid ,visitnum , trtedt, trtedt_c  )</span></span></code></pre></div>
<p>Merging back with ADSL data set</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="Variable.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Final dates check </span></span>
<span id="cb29-2"><a href="Variable.html#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="Variable.html#cb29-3" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(adsl_deri01, exendtc_2 , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>) </span></code></pre></div>
<div id="note" class="notechk" style="red">
<p>NOTE : Variables that are not calculated</p>
<ol style="list-style-type: decimal">
<li><p>AVGDD (Avg Daily Dose (as planned )) and<br />
</p></li>
<li><p>CUMDOSE (Cumulative Dose (as planned) )<br />
</p></li>
<li><p>COMP8FL , COMP16FL , COMP24FL ,</p></li>
<li><p>VISNUMEN ( End of Trt Visit (Vis 12 or Early )</p></li>
</ol>
</div>
<p>Population Flag</p>
<p><strong><code>1. SAFFL(Safety Population Flag ) 2. EFFFL (Efficacy Population Flag ) 3. DSRAEFL (Discontinued due to AE ? )</code></strong></p>
<p>Y if SAFFL=’Y AND subject has at least one record in QS for ADAS-Cog with VISITNUM&gt;3 AND at least one record in QS for CIBIC+ with VISITNUM&gt;3, N otherwise</p>
<div class="notechk" style="red">
<p><strong>NOTE: try using <u>‘and’</u> ( gives an error ) , while <u>‘&amp;’ Not</u><br />
For example when (25&lt;= bmibl &lt; 30 ) or (25&lt;= bmibl and bmibl &lt;30 ) we get an error use (25&lt;= bmibl &amp; bmibl &lt;30 )</strong></p>
</div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="Variable.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saffl (safety flag)</span></span>
<span id="cb30-2"><a href="Variable.html#cb30-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb30-3"><a href="Variable.html#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="Variable.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="Variable.html#cb30-5" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> adsl_deri01 <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="Variable.html#cb30-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>( <span class="at">rfendt =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(rfendtc)) ,</span>
<span id="cb30-7"><a href="Variable.html#cb30-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">saffl =</span>   <span class="fu">case_when</span> ((ittfl <span class="sc">%in%</span> <span class="st">&quot;Y&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(trtsdt))<span class="sc">~</span> <span class="st">&quot;Y&quot;</span> ) , </span>
<span id="cb30-8"><a href="Variable.html#cb30-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">trtdur =</span> <span class="fu">as.numeric</span> ( <span class="fu">as.Date</span>(trtedt)  <span class="sc">-</span> <span class="fu">as.Date</span> (trtsdt) ) <span class="sc">+</span> <span class="dv">1</span> ) </span>
<span id="cb30-9"><a href="Variable.html#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="Variable.html#cb30-10" aria-hidden="true" tabindex="-1"></a>effi_01 <span class="ot">&lt;-</span>qs <span class="sc">%&gt;%</span> </span>
<span id="cb30-11"><a href="Variable.html#cb30-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>( qstestcd <span class="sc">==</span><span class="st">&quot;ACTOT&quot;</span> <span class="sc">&amp;</span> visitnum <span class="sc">&gt;</span> <span class="dv">3</span>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb30-12"><a href="Variable.html#cb30-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>( <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-13"><a href="Variable.html#cb30-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">distinct</span>(usubjid , <span class="at">.keep_all =</span>  <span class="cn">TRUE</span> )  <span class="sc">%&gt;%</span> </span>
<span id="cb30-14"><a href="Variable.html#cb30-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span> ( usubjid , qstestcd )</span>
<span id="cb30-15"><a href="Variable.html#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="Variable.html#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="Variable.html#cb30-17" aria-hidden="true" tabindex="-1"></a>adsl_deri01 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri01, effi_01 , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)</span>
<span id="cb30-18"><a href="Variable.html#cb30-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-19"><a href="Variable.html#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Efficacy flag (safety flag)</span></span>
<span id="cb30-20"><a href="Variable.html#cb30-20" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb30-21"><a href="Variable.html#cb30-21" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> adsl_deri01 <span class="sc">%&gt;%</span>  </span>
<span id="cb30-22"><a href="Variable.html#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">efffl =</span>   <span class="fu">case_when</span> ((saffl <span class="sc">%in%</span> <span class="st">&quot;Y&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(qstestcd) )<span class="sc">~</span> <span class="st">&quot;Y&quot;</span> ) )  </span></code></pre></div>
</div>
<div id="baseline-variables" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Baseline Variables</h2>
<p><strong>DISONSDT Date of Onset of disease</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="Variable.html#cb31-1" aria-hidden="true" tabindex="-1"></a>disonsdt <span class="ot">&lt;-</span> mh <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="Variable.html#cb31-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(mhcat <span class="sc">==</span><span class="st">&quot;PRIMARY DIAGNOSIS&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="Variable.html#cb31-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span> (<span class="at">disonsdt =</span>  <span class="fu">as.Date</span>(<span class="fu">as.character</span>(mhstdtc) )  , </span>
<span id="cb31-4"><a href="Variable.html#cb31-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) ) <span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="Variable.html#cb31-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span> (usubjid , disonsdt)</span></code></pre></div>
<p><strong>Baseline Height</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="Variable.html#cb32-1" aria-hidden="true" tabindex="-1"></a>heightbl  <span class="ot">&lt;-</span> vs <span class="sc">%&gt;%</span>  </span>
<span id="cb32-2"><a href="Variable.html#cb32-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">filter</span> ( vstestcd <span class="sc">==</span> <span class="st">&quot;HEIGHT&quot;</span> <span class="sc">&amp;</span> visitnum <span class="sc">==</span> <span class="dv">1</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="Variable.html#cb32-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">heightbl =</span> <span class="fu">round</span>(vsstresn, <span class="dv">1</span>)  , </span>
<span id="cb32-4"><a href="Variable.html#cb32-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-5"><a href="Variable.html#cb32-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span> ( usubjid , heightbl)</span></code></pre></div>
<p><strong>Baseline Weight</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="Variable.html#cb33-1" aria-hidden="true" tabindex="-1"></a>weightbl  <span class="ot">&lt;-</span> vs <span class="sc">%&gt;%</span>  </span>
<span id="cb33-2"><a href="Variable.html#cb33-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">filter</span> ( vstestcd <span class="sc">==</span> <span class="st">&quot;WEIGHT&quot;</span> <span class="sc">&amp;</span> visitnum <span class="sc">==</span> <span class="dv">3</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="Variable.html#cb33-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">weightbl =</span> <span class="fu">round</span>(vsstresn, <span class="dv">1</span>)  , </span>
<span id="cb33-4"><a href="Variable.html#cb33-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) ) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="Variable.html#cb33-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span> ( usubjid , weightbl)</span></code></pre></div>
<p><strong>Years of Education</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="Variable.html#cb34-1" aria-hidden="true" tabindex="-1"></a>educlvl <span class="ot">&lt;-</span>  sc <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="Variable.html#cb34-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">educlvl =</span> scstresn   ,</span>
<span id="cb34-3"><a href="Variable.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">usubjid =</span> <span class="fu">as.character</span>(usubjid) ) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="Variable.html#cb34-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span> ( usubjid , educlvl )</span></code></pre></div>
<p><strong>Getting derived variables into main dataset</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="Variable.html#cb35-1" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri02 , disonsdt , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>) </span>
<span id="cb35-2"><a href="Variable.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="Variable.html#cb35-3" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri02 , heightbl , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)            </span>
<span id="cb35-4"><a href="Variable.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="Variable.html#cb35-5" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri02 , weightbl , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)        </span>
<span id="cb35-6"><a href="Variable.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="Variable.html#cb35-7" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri02 , educlvl , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>) </span>
<span id="cb35-8"><a href="Variable.html#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="Variable.html#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="Variable.html#cb35-10" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span>  adsl_deri02 <span class="sc">%&gt;%</span> </span>
<span id="cb35-11"><a href="Variable.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span> (<span class="at">bmibl =</span> <span class="fu">round</span>((weightbl<span class="sc">/</span>((heightbl<span class="sc">*</span>heightbl ))<span class="sc">*</span><span class="dv">100</span><span class="sc">*</span><span class="dv">100</span>  ) , <span class="dv">1</span> ) , </span>
<span id="cb35-12"><a href="Variable.html#cb35-12" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb35-13"><a href="Variable.html#cb35-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">bmiblgr1  =</span> <span class="fu">case_when</span>(  (bmibl<span class="sc">&lt;</span><span class="dv">25</span>) <span class="sc">~</span> <span class="st">&quot;Normal&quot;</span> , </span>
<span id="cb35-14"><a href="Variable.html#cb35-14" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb35-15"><a href="Variable.html#cb35-15" aria-hidden="true" tabindex="-1"></a>                                (<span class="dv">25</span><span class="sc">&lt;=</span> bmibl <span class="sc">&amp;</span> bmibl <span class="sc">&lt;</span><span class="dv">30</span> ) <span class="sc">~</span> <span class="st">&quot;Overweight&quot;</span> , </span>
<span id="cb35-16"><a href="Variable.html#cb35-16" aria-hidden="true" tabindex="-1"></a>                                ( bmibl <span class="sc">&gt;=</span> <span class="dv">30</span> ) <span class="sc">~</span> <span class="st">&quot;Obese&quot;</span></span>
<span id="cb35-17"><a href="Variable.html#cb35-17" aria-hidden="true" tabindex="-1"></a>                              ) </span>
<span id="cb35-18"><a href="Variable.html#cb35-18" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb35-19"><a href="Variable.html#cb35-19" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p>Number of months difference between the two dates, in SAS</p>
<p>when the difference is 43 months and 26 days INTCK function calculates 26 days is what fraction is 26 days in a month while R gives just 43 months</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="Variable.html#cb36-1" aria-hidden="true" tabindex="-1"></a>adsl_durdis <span class="ot">&lt;-</span> adsl_deri02  <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="Variable.html#cb36-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span> (<span class="at">visit1dt2 =</span>   <span class="fu">as.Date</span>(visit1dt)  ,</span>
<span id="cb36-3"><a href="Variable.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">disonsdt2 =</span>   <span class="fu">as.Date</span>(disonsdt)  , </span>
<span id="cb36-4"><a href="Variable.html#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">durdis    =</span> <span class="fu">interval</span>( disonsdt2  ,  visit1dt2) <span class="sc">%/%</span> <span class="fu">months</span>(<span class="dv">1</span>) , </span>
<span id="cb36-5"><a href="Variable.html#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">durdsgr1 =</span> <span class="fu">case_when</span> ( durdis <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">~</span> <span class="st">&quot;&lt;12&quot;</span> , </span>
<span id="cb36-6"><a href="Variable.html#cb36-6" aria-hidden="true" tabindex="-1"></a>                           durdis <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">~</span> <span class="st">&quot;&gt;=12&quot;</span>  )</span>
<span id="cb36-7"><a href="Variable.html#cb36-7" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="Variable.html#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span> (  usubjid , visit1dt  , disonsdt  , durdis , durdsgr1 )</span>
<span id="cb36-9"><a href="Variable.html#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="Variable.html#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="Variable.html#cb36-11" aria-hidden="true" tabindex="-1"></a>adsl_deri02 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(adsl_deri02 , adsl_durdis , <span class="at">by =</span> <span class="st">&quot;usubjid&quot;</span>)</span></code></pre></div>
</div>
<div id="comparing-the-values-generated-against-the-production-data-set" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Comparing the values generated against the production data set</h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="Variable.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;arsenal&quot;)</span></span>
<span id="cb37-2"><a href="Variable.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="Variable.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-4"><a href="Variable.html#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># adsl_deri02 &lt;- adsl_deri02 %&gt;% </span></span>
<span id="cb37-5"><a href="Variable.html#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                 mutate( usubjid = as.character(usubjid) , </span></span>
<span id="cb37-6"><a href="Variable.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                         trtedt = as.character(trtedt) , </span></span>
<span id="cb37-7"><a href="Variable.html#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                         trtdur = as.numeric( trtdur) , </span></span>
<span id="cb37-8"><a href="Variable.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                         saffl  = as.character(saffl ) , </span></span>
<span id="cb37-9"><a href="Variable.html#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co">#                         efffl  = as.character(efffl ) , </span></span>
<span id="cb37-10"><a href="Variable.html#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">#                         disonsdt = as.character(disonsdt)</span></span>
<span id="cb37-11"><a href="Variable.html#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                   )%&gt;% </span></span>
<span id="cb37-12"><a href="Variable.html#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb37-13"><a href="Variable.html#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># select (usubjid , saffl , efffl , trtdur, disconfl ,dcreascd , dsraefl , heightbl , weightbl , bmibl , bmiblgr1 , educlvl , disonsdt </span></span>
<span id="cb37-14"><a href="Variable.html#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co">#         ) %&gt;% </span></span>
<span id="cb37-15"><a href="Variable.html#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange( usubjid)</span></span>
<span id="cb37-16"><a href="Variable.html#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="Variable.html#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb37-18"><a href="Variable.html#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-19"><a href="Variable.html#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-20"><a href="Variable.html#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-21"><a href="Variable.html#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-22"><a href="Variable.html#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-23"><a href="Variable.html#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="co"># adsl_prog  &lt;-   clinicalfd::adsl %&gt;%</span></span>
<span id="cb37-24"><a href="Variable.html#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="co">#                 mutate( usubjid = as.character(usubjid) , </span></span>
<span id="cb37-25"><a href="Variable.html#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="co">#                         trtedt = as.character(trtedt) , </span></span>
<span id="cb37-26"><a href="Variable.html#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="co">#                         trtdur = as.numeric( trtdur) , </span></span>
<span id="cb37-27"><a href="Variable.html#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="co">#                         saffl  = as.character(saffl ) , </span></span>
<span id="cb37-28"><a href="Variable.html#cb37-28" aria-hidden="true" tabindex="-1"></a><span class="co">#                         efffl  = as.character(efffl ) , </span></span>
<span id="cb37-29"><a href="Variable.html#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="co">#                         disonsdt = as.character(disonsdt)</span></span>
<span id="cb37-30"><a href="Variable.html#cb37-30" aria-hidden="true" tabindex="-1"></a><span class="co">#                         </span></span>
<span id="cb37-31"><a href="Variable.html#cb37-31" aria-hidden="true" tabindex="-1"></a><span class="co">#                   )%&gt;%</span></span>
<span id="cb37-32"><a href="Variable.html#cb37-32" aria-hidden="true" tabindex="-1"></a><span class="co"># select (usubjid , saffl , efffl  , trtdur , disconfl ,                             dcreascd , dsraefl , heightbl ,weightbl , bmibl , bmiblgr1 , educlvl ,disonsdt  )%&gt;% </span></span>
<span id="cb37-33"><a href="Variable.html#cb37-33" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange( usubjid)</span></span>
<span id="cb37-34"><a href="Variable.html#cb37-34" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-35"><a href="Variable.html#cb37-35" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-36"><a href="Variable.html#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="co"># adsl_orig &lt;- clinicalfd::adsl</span></span>
<span id="cb37-37"><a href="Variable.html#cb37-37" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-38"><a href="Variable.html#cb37-38" aria-hidden="true" tabindex="-1"></a><span class="co">#  arsenal::comparedf ( adsl_prog , adsl_deri02 )</span></span>
<span id="cb37-39"><a href="Variable.html#cb37-39" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb37-40"><a href="Variable.html#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="co">#  summary(comparedf ( adsl_prog , adsl_deri02 ))</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="Variable.html#cb38-1" aria-hidden="true" tabindex="-1"></a>adsl_orig <span class="ot">&lt;-</span> clinicalfd<span class="sc">::</span>adsl</span>
<span id="cb38-2"><a href="Variable.html#cb38-2" aria-hidden="true" tabindex="-1"></a>adsl_durdis <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span> (adsl_orig , usubjid , visit1dt, disonsdt , durdis )</span>
<span id="cb38-3"><a href="Variable.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="Variable.html#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="Variable.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">#adsl_durdis &lt;- select ( adsl_deri02 , usubjid , disonsdt , durdis )</span></span>
<span id="cb38-6"><a href="Variable.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">#names(adsl_orig)</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="Variable.html#cb39-1" aria-hidden="true" tabindex="-1"></a>ds_orig <span class="ot">&lt;-</span> ds </span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="subject-level-analysis-adsl.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book_example.pdf", "book_example.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
